---
import type { Props } from '@astrojs/starlight/props';
import Icon from '../../node_modules/@astrojs/starlight/user-components/Icon.astro';
import { pwaInfo } from "virtual:pwa-info";


---

{pwaInfo && <Fragment set:html={pwaInfo.webManifest.linkTag} />}
<script>
    import { registerSW } from "virtual:pwa-register";

    registerSW({
      immediate: true,
      onRegisteredSW(swScriptUrl) {
        console.log("SW registered: ", swScriptUrl);
      },
      onOfflineReady() {
        console.log("PWA application ready to work offline");
      },
    });
  </script>

{/* This is intentionally inlined to avoid FOUC. */}
<script is:inline>
	// ‚òùÔ∏è This script prevent the FART effect.
	if (localStorage.getItem("theme") === null) {
	  document.documentElement.setAttribute("data-theme", "blue");
	} else
	  document.documentElement.setAttribute(
		"data-theme",
		localStorage.getItem("theme")
	  );
	// "theme" LocalStorage value is set by the package to remember user preference.
	// The value is checked and applyed before rendering anything.
  </script>
  <script>
	import { themeChange } from 'theme-change';
	themeChange();
	// üëÜ you could import the CDN directly instead of these two lines
  </script>


<template id="theme-icons">
	<Icon name="sun" class="light" />
	<Icon name="moon" class="dark" />
	<Icon name="laptop" class="auto" />
</template>
